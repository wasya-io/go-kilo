# ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç§»è¡Œè¨ˆç”»

## æ¦‚è¦
ç¾åœ¨ã®ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ç§»è¡Œã—ã€ã‚ˆã‚ŠæŸ”è»Ÿã§æ‹¡å¼µæ€§ã®é«˜ã„æ§‹é€ ã«æ”¹å–„ã™ã‚‹è¨ˆç”»ã§ã™ã€‚
ã“ã®ç§»è¡Œã¯æ®µéšçš„ã«è¡Œã„ã€æ—¢å­˜ã®æ©Ÿèƒ½ã‚’ç¶­æŒã—ãªãŒã‚‰æ–°ã—ã„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å°å…¥ã—ã¦ã„ãã¾ã™ã€‚

## ç§»è¡Œã®ç›®çš„
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ç–çµåˆåŒ–
- æ©Ÿèƒ½æ‹¡å¼µã®å®¹æ˜“æ€§å‘ä¸Š
- ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã®å‘ä¸Š
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ã®å°å…¥æº–å‚™

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®è¨­è¨ˆ

### 1. ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç›¤
#### ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—
- å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆã‚­ãƒ¼å…¥åŠ›ã€ãƒã‚¦ã‚¹å…¥åŠ›ï¼‰
- ãƒãƒƒãƒ•ã‚¡ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›´ã€ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ï¼‰
- UIæ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆè¡¨ç¤ºæ›´æ–°ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚¤ãƒ™ãƒ³ãƒˆï¼ˆèª­ã¿è¾¼ã¿ã€ä¿å­˜ï¼‰

#### ã‚³ã‚¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
1. EventManager
   - ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºè¡Œã¨è³¼èª­ã‚’ç®¡ç†
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã®åˆ¶å¾¡
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®ç™»éŒ²/è§£é™¤

2. InputEventEmitter
   - ã‚­ãƒ¼å…¥åŠ›ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã«å¤‰æ›
   - å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºè¡Œ

3. BufferEventHandler
   - ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
   - ãƒãƒƒãƒ•ã‚¡çŠ¶æ…‹ã®ç®¡ç†

4. UIEventHandler
   - è¡¨ç¤ºæ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ¶å¾¡

5. FileEventHandler
   - ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†
   - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã®é€£æº

### 2. å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º
#### ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®åŸºç›¤å®Ÿè£…
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®å®Ÿè£…
   - ã‚¤ãƒ™ãƒ³ãƒˆå‹ã®å®šç¾©
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã®å®Ÿè£…
   - åŸºæœ¬çš„ãªã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒæ©Ÿèƒ½

2. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®åˆ†æ
   - ç¾åœ¨ã®ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®çµ±åˆãƒã‚¤ãƒ³ãƒˆã®ç‰¹å®š
   - ã‚¤ãƒ™ãƒ³ãƒˆåŒ–ãŒå¿…è¦ãªæ“ä½œã®æ´—ã„å‡ºã—

#### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ®µéšçš„ç§»è¡Œ
1. InputHandlerã®ç§»è¡Œ
   - ã‚­ãƒ¼å…¥åŠ›ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–
   - ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®æ©‹æ¸¡ã—å®Ÿè£…

2. ãƒãƒƒãƒ•ã‚¡æ“ä½œã®ç§»è¡Œ
   - ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè£…
   - ãƒãƒƒãƒ•ã‚¡çŠ¶æ…‹å¤‰æ›´ã®é€šçŸ¥æ©Ÿæ§‹

3. UIæ›´æ–°ã®ç§»è¡Œ
   - è¡¨ç¤ºæ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè£…
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã®çµ±åˆ

#### ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ã®æº–å‚™
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®è¨­è¨ˆ
2. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç™»éŒ²æ©Ÿæ§‹ã®å®Ÿè£…
3. åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³APIã®å®šç¾©

### 3. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥
1. æ—¢å­˜æ©Ÿèƒ½ã®ç¶­æŒ
   - æ®µéšçš„ãªç§»è¡Œã«ã‚ˆã‚‹æ©Ÿèƒ½ã®å®‰å®šæ€§ç¢ºä¿
   - å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®ãƒ†ã‚¹ãƒˆ coverage ã®ç¶­æŒ

2. æ–°æ©Ÿèƒ½ã®å®Ÿè£…æ–¹é‡
   - æ–°æ©Ÿèƒ½ã¯æ–°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ™ãƒ¼ã‚¹ã§å®Ÿè£…
   - æ—¢å­˜æ©Ÿèƒ½ã¯æ®µéšçš„ã«ç§»è¡Œ

3. ä¸‹ä½äº’æ›æ€§ã®ç¶­æŒ
   - æ—¢å­˜ã®APIã¨ã®äº’æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æä¾›
   - éæ¨å¥¨åŒ–ã¨ç§»è¡ŒæœŸé–“ã®è¨­å®š

## æŠ€è¡“çš„ãªè€ƒæ…®äº‹é …
- Goã®ãƒãƒ£ãƒãƒ«ã¨goroutineã®åŠ¹æœçš„ãªæ´»ç”¨
- ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆé †ä½ä»˜ã‘ã¨é †åºä¿è¨¼
- ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹
- ãƒ‡ãƒãƒƒã‚°ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿

## UIæ›´æ–°ã®å®Ÿè£…è¨ˆç”»

### 1. ã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ ã®æ‹¡å¼µ
#### è¿½åŠ ã™ã¹ãUIã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—
- éƒ¨åˆ†æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆè¡Œå˜ä½ã®æ›´æ–°ï¼‰
- ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ
  - ã‚¨ãƒ‡ã‚£ã‚¿é ˜åŸŸæ›´æ–°
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼æ›´æ–°
  - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ¼æ›´æ–°
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆ
  - ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
  - éƒ¨åˆ†ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«

#### ã‚¤ãƒ™ãƒ³ãƒˆã®æœ€é©åŒ–æ©Ÿæ§‹
- æ›´æ–°ã®å„ªå…ˆé †ä½ä»˜ã‘
- ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒãƒƒãƒå‡¦ç†
  - è¤‡æ•°æ›´æ–°ã®é›†ç´„
  - ä¸è¦ãªæ›´æ–°ã®æ’é™¤
- æ›´æ–°ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®åˆ¶å¾¡

### 2. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†é›¢
#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ 
- ã‚¨ãƒ‡ã‚£ã‚¿é ˜åŸŸ
  - ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
  - ã‚«ãƒ¼ã‚½ãƒ«åˆ¶å¾¡
  - é¸æŠç¯„å›²è¡¨ç¤º
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼
  - ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
  - ç·¨é›†çŠ¶æ…‹
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒãƒ¼
  - é€šçŸ¥è¡¨ç¤º
  - ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®é€£æº
- ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹åŒæœŸ
- ç‹¬ç«‹ã—ãŸæ›´æ–°ã‚µã‚¤ã‚¯ãƒ«
- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç®¡ç†ã®æ”¹å–„

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
#### æ›´æ–°åˆ¶å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
- æç”»ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°
- ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°
- å·®åˆ†æ›´æ–°

#### ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åˆ¶å¾¡ã®æ”¹å–„
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«çŠ¶æ…‹ã®æŠ½è±¡åŒ–
- ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®å®Ÿè£…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è€ƒæ…®ã—ãŸãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆç®¡ç†

### 4. å®Ÿè£…å„ªå…ˆé †ä½
1. åŸºæœ¬ã‚¤ãƒ™ãƒ³ãƒˆæ§‹é€ ã®æ‹¡å¼µ
   - ç´°ã‹ã„ç²’åº¦ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—è¿½åŠ 
   - ãƒãƒƒãƒå‡¦ç†ã®åŸºç›¤å®Ÿè£…

2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆ†é›¢
   - UIè¦ç´ ã®ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåŒ–
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®æ›´æ–°åˆ¶å¾¡å®Ÿè£…

3. æœ€é©åŒ–æ©Ÿæ§‹ã®å°å…¥
   - æ›´æ–°åˆ¶å¾¡ã®å®Ÿè£…
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

4. é«˜åº¦ãªæ©Ÿèƒ½ã®å®Ÿè£…
   - ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ

## ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³
1. ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ï¼ˆ2-3é€±é–“ï¼‰
2. ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç§»è¡Œï¼ˆ3-4é€±é–“ï¼‰
3. ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ï¼ˆ2-3é€±é–“ï¼‰

## æˆåŠŸæŒ‡æ¨™
- ã‚³ãƒ¼ãƒ‰ã®å‡é›†åº¦ã¨çµåˆåº¦ã®æ”¹å–„
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¶­æŒ/å‘ä¸Š
- æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®é–‹ç™ºåŠ¹ç‡
- ãƒã‚°ä¿®æ­£ã®å®¹æ˜“æ€§

## å®Ÿè£…çŠ¶æ³ã¨é€²æ—

### ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ï¼ˆå®Œäº†ï¼‰
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã®å®Ÿè£…
   - âœ… ã‚¤ãƒ™ãƒ³ãƒˆå‹ã®å®šç¾©å®Œäº†
   - âœ… ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ã®å®Ÿè£…å®Œäº†
   - âœ… ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒæ©Ÿèƒ½å®Ÿè£…å®Œäº†
   - âœ… ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹ã®å®Ÿè£…å®Œäº†
   - âœ… ãƒãƒƒãƒå‡¦ç†ã¨ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°æ©Ÿæ§‹ã®å®Ÿè£…å®Œäº†

2. ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
   - âœ… ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½å®Ÿè£…å®Œäº†
   - âœ… ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿèƒ½å®Ÿè£…å®Œäº†

### ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç§»è¡Œï¼ˆé€²è¡Œä¸­ï¼‰
1. InputHandlerã®ç§»è¡Œ
   - âœ… åŸºæœ¬çš„ãªã‚­ãƒ¼å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆå®Ÿè£…å®Œäº†
   - âœ… InputEventEmitterã®å®Ÿè£…å®Œäº†
   - ğŸ”„ ãƒã‚¦ã‚¹å…¥åŠ›å¯¾å¿œã®æ‹¡å¼µä¸­
   - ğŸ”„ IMEå…¥åŠ›ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–å¯¾å¿œä¸­

2. ãƒãƒƒãƒ•ã‚¡æ“ä½œã®ç§»è¡Œ
   - âœ… ãƒ†ã‚­ã‚¹ãƒˆæ“ä½œã‚¤ãƒ™ãƒ³ãƒˆã®å®Ÿè£…å®Œäº†
   - âœ… ãƒãƒƒãƒ•ã‚¡çŠ¶æ…‹å¤‰æ›´ã®é€šçŸ¥æ©Ÿæ§‹å®Ÿè£…å®Œäº†
   - ğŸ”„ æ§‹é€ çš„å¤‰æ›´ã®ã‚¤ãƒ™ãƒ³ãƒˆæœ€é©åŒ–ä¸­

3. UIæ›´æ–°ã®ç§»è¡Œ
   - âœ… åŸºæœ¬çš„ãªUIæ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆå®Ÿè£…å®Œäº†
   - âœ… ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥æ›´æ–°æ©Ÿèƒ½å®Ÿè£…å®Œäº†
   - ğŸ”„ ãƒãƒƒãƒæ›´æ–°ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ä¸­
   - âŒ ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æœªå®Ÿè£…

### ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ï¼ˆæœªç€æ‰‹ï¼‰
1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
2. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç™»éŒ²æ©Ÿæ§‹å®Ÿè£…
3. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³APIã®å®šç¾©ã¨å®Ÿè£…

## ä»Šå¾Œã®å„ªå…ˆèª²é¡Œ

### 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆé«˜å„ªå…ˆï¼‰
- ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒƒãƒå‡¦ç†ã®åŠ¹ç‡åŒ–
- æ›´æ–°åˆ¶å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®æ”¹å–„
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–

### 2. æ©Ÿèƒ½æ‹¡å¼µï¼ˆä¸­å„ªå…ˆï¼‰
- ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å®Ÿè£…
- ãƒã‚¦ã‚¹æ“ä½œã®å®Œå…¨å¯¾å¿œ
- IMEå…¥åŠ›ã®å®Œå…¨å¯¾å¿œ

### 3. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åŸºç›¤ï¼ˆä½å„ªå…ˆï¼‰
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®è¨­è¨ˆ
- åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³APIã®å®Ÿè£…

## ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ›´æ–°
1. âœ… ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ åŸºç›¤ï¼ˆå®Œäº†ï¼‰
2. ğŸ”„ ãƒ•ã‚§ãƒ¼ã‚º2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç§»è¡Œï¼ˆ2-3é€±é–“ï¼‰
3. âŒ ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ï¼ˆ3-4é€±é–“ï¼‰

## ã‚³ãƒãƒ³ãƒ‰ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã¸ã®æ®µéšçš„ç§»è¡Œè¨ˆç”»

### 1. ã‚«ãƒ¼ã‚½ãƒ«æ“ä½œã®ç§»è¡Œï¼ˆç¬¬ä¸€æ®µéšï¼‰
#### ç†ç”±
- å‰¯ä½œç”¨ãŒæ¯”è¼ƒçš„å°‘ãªãã€çŠ¶æ…‹å¤‰æ›´ãŒæ˜ç¢º
- UIæ›´æ–°ã¨ã®é€£æºãŒå¿…è¦ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®åˆ©ç‚¹ãŒæ´»ã‹ã›ã‚‹
- ä»–ã®æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãŒé™å®šçš„

#### ç§»è¡Œæ‰‹é †
1. CursorEventå‹ã®è¿½åŠ å®Ÿè£…
   - Positionã€Directionæƒ…å ±ã‚’å«ã‚€
   - ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆåº¦è¨­å®š

2. ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã‚³ãƒãƒ³ãƒ‰ã®ç§»è¡Œ
   - æ—¢å­˜ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
   - æ®µéšçš„ãªç½®ãæ›ãˆ
   - UIã®ã‚«ãƒ¼ã‚½ãƒ«æ›´æ–°å‡¦ç†ã‚’ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã¨ã—ã¦å®Ÿè£…

3. ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£æº
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å‡¦ç†ã‚’ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ã¨ã—ã¦å®Ÿè£…
   - ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã«ä¼´ã†è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®çµ±åˆ

#### ã‚«ãƒ¼ã‚½ãƒ«æ“ä½œã®ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼è©³ç´°
1. ç¾çŠ¶ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
MoveCursorCommand.Execute()
â””â†’ Editor.MoveCursor()
   â””â†’ UI.MoveCursor()
      â”œâ†’ calculateNewCursorPosition() // ä½ç½®è¨ˆç®—
      â””â†’ SetCursor()                  // ä½ç½®æ›´æ–°
         â””â†’ QueueUpdate(AreaCursor)   // ç”»é¢æ›´æ–°
```

2. ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹åŒ–å¾Œã®å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
MoveCursorCommand.Execute()
â””â†’ Editor.MoveCursor()
   â””â†’ eventManager.Publish(CursorEvent)
      â””â†’ UI.handleCursorEvent()           // ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
         â”œâ†’ calculateNewCursorPosition()   // ä½ç½®è¨ˆç®—ï¼ˆæ—¢å­˜å‡¦ç†ã‚’å†åˆ©ç”¨ï¼‰
         â””â†’ updateCursorPosition()         // ä½ç½®æ›´æ–°
            â”œâ†’ publishCursorUpdateEvent()  // ä½ç½®æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
            â””â†’ QueueUpdate(AreaCursor)     // ç”»é¢æ›´æ–°è¦æ±‚
```

3. ã‚«ãƒ¼ã‚½ãƒ«é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡
- CursorMoveEvent: ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•è¦æ±‚
  - Direction: ç§»å‹•æ–¹å‘ï¼ˆUp/Down/Left/Rightï¼‰
  - Distance: ç§»å‹•é‡
  - IsRelative: ç›¸å¯¾ç§»å‹•ã‹çµ¶å¯¾ç§»å‹•ã‹

- CursorUpdateEvent: ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®æ›´æ–°é€šçŸ¥
  - Position: æ–°ã—ã„ä½ç½®ï¼ˆX, Yï¼‰
  - Source: æ›´æ–°å…ƒï¼ˆMove/Set/Scrollç­‰ï¼‰

4. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®è²¬å‹™
- UI.handleCursorEvent()
  - ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•è¦æ±‚ã®å‡¦ç†
  - ãƒãƒƒãƒ•ã‚¡å¢ƒç•Œã®ãƒã‚§ãƒƒã‚¯
  - æ–°ã—ã„ä½ç½®ã®è¨ˆç®—
  - ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã®è€ƒæ…®

- UI.handleCursorUpdateEvent()
  - ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®æ›´æ–°
  - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã®èª¿æ•´
  - ç”»é¢æ›´æ–°ã®è¦æ±‚
  - é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®é€šçŸ¥

5. ç§»è¡Œæ‰‹é †ã®è©³ç´°
- ãƒ•ã‚§ãƒ¼ã‚º1: ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œã®å°å…¥
  - CursorEventå‹ã®å®Ÿè£…
  - æ—¢å­˜ã®MoveCursor/SetCursorå†…ã§ã®ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
  - æ—¢å­˜ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®ç¶­æŒ

- ãƒ•ã‚§ãƒ¼ã‚º2: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…
  - handleCursorEvent/handleCursorUpdateEventã®å®Ÿè£…
  - æ—¢å­˜ã®ä½ç½®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ç§»è¡Œ
  - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ 

- ãƒ•ã‚§ãƒ¼ã‚º3: ã‚³ãƒãƒ³ãƒ‰ã®ç§»è¡Œ
  - MoveCursorCommandã®æ›´æ–°
  - ç›´æ¥çš„ãªUIæ“ä½œã®å‰Šé™¤
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®å‡¦ç†ã¸ã®å®Œå…¨ç§»è¡Œ

### 2. ãƒ†ã‚­ã‚¹ãƒˆé¸æŠæ“ä½œã®ç§»è¡Œï¼ˆç¬¬äºŒæ®µéšï¼‰
#### ç†ç”±
- ã‚«ãƒ¼ã‚½ãƒ«æ“ä½œã®æ‹¡å¼µã¨ã—ã¦è‡ªç„¶ãªæµã‚Œ
- é¸æŠç¯„å›²ã®UIæ›´æ–°ã«ã‚¤ãƒ™ãƒ³ãƒˆãŒæœ‰åŠ¹

#### ç§»è¡Œæ‰‹é †
1. SelectionEventå‹ã®å®Ÿè£…
   - é¸æŠç¯„å›²æƒ…å ±ã®å®šç¾©
   - é¸æŠçŠ¶æ…‹ã®å¤‰æ›´é€šçŸ¥

2. é¸æŠæ“ä½œã®ç§»è¡Œ
   - é¸æŠã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–
   - é¸æŠç¯„å›²ã®UIæ›´æ–°ã‚’ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã§å®Ÿè£…
   - ã‚«ãƒ¼ã‚½ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã¨ã®é€£æº

### 3. å˜ä¸€æ–‡å­—ç·¨é›†æ“ä½œã®ç§»è¡Œï¼ˆç¬¬ä¸‰æ®µéšï¼‰
#### ç†ç”±
- åŸºæœ¬çš„ãªç·¨é›†æ“ä½œã§å½±éŸ¿ç¯„å›²ãŒäºˆæ¸¬å¯èƒ½
- Undoã‚¹ã‚¿ãƒƒã‚¯ã¨ã®é€£æºãŒå¿…è¦ã ãŒã‚¹ã‚³ãƒ¼ãƒ—ã¯é™å®šçš„

#### ç§»è¡Œæ‰‹é †
1. CharacterEventå‹ã®å®Ÿè£…
   - æ–‡å­—ã®æŒ¿å…¥/å‰Šé™¤ã‚¤ãƒ™ãƒ³ãƒˆ
   - å½±éŸ¿ç¯„å›²ã®ç‰¹å®šæ©Ÿèƒ½

2. æ–‡å­—æ“ä½œã®ç§»è¡Œ
   - æ–‡å­—æ“ä½œã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–
   - ãƒãƒƒãƒ•ã‚¡æ›´æ–°å‡¦ç†ã‚’ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã§å®Ÿè£…
   - Undo/Redoã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºå®Ÿè£…

### 4. è¡Œæ“ä½œã®ç§»è¡Œï¼ˆç¬¬å››æ®µéšï¼‰
#### ç†ç”±
- æ§‹é€ çš„ãªå¤‰æ›´ã‚’ä¼´ã†ãŒå½±éŸ¿ç¯„å›²ã¯äºˆæ¸¬å¯èƒ½
- ãƒãƒƒãƒ•ã‚¡ã¨UIã®åŒæœŸãŒé‡è¦

#### ç§»è¡Œæ‰‹é †
1. LineEventå‹ã®å®Ÿè£…
   - æ”¹è¡Œã€è¡Œå‰Šé™¤ç­‰ã®ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
   - è¡Œç¯„å›²ã®å¤‰æ›´é€šçŸ¥

2. è¡Œæ“ä½œã®ç§»è¡Œ
   - è¡Œæ“ä½œã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–
   - ãƒãƒƒãƒ•ã‚¡æ›´æ–°ã¨UIæ›´æ–°ã®é€£æºã‚’ã‚¤ãƒ™ãƒ³ãƒˆã§å®Ÿè£…
   - æ§‹é€ çš„å¤‰æ›´ã®æœ€é©åŒ–

### 5. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ç§»è¡Œï¼ˆç¬¬äº”æ®µéšï¼‰
#### ç†ç”±
- å¤§è¦æ¨¡ãªçŠ¶æ…‹å¤‰æ›´ã‚’ä¼´ã†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé‡è¦

#### ç§»è¡Œæ‰‹é †
1. FileEventå‹ã®æ‹¡å¼µ
   - æ—¢å­˜å®Ÿè£…ã®å¼·åŒ–
   - ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã®è©³ç´°åŒ–

2. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã®ç§»è¡Œ
   - ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚³ãƒãƒ³ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆåŒ–
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒªã‚«ãƒãƒªãƒ¼ã®å®Ÿè£…
   - çŠ¶æ…‹åŒæœŸã®æœ€é©åŒ–

### ç§»è¡Œæˆ¦ç•¥ã®ãƒã‚¤ãƒ³ãƒˆ

#### 1. æ®µéšçš„ãªãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰é‹ç”¨
- ã‚³ãƒãƒ³ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®å…±å­˜
- ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã™ã‚‹ä¸­é–“å±¤ã®å°å…¥
- å¾ã€…ã«ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ™ãƒ³ãƒˆã«ç½®ãæ›ãˆ

#### 2. ãƒ†ã‚¹ãƒˆé§†å‹•ã§ã®ç§»è¡Œ
- å„æ®µéšã§ã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã®ä½œæˆ
- ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºè¡Œã¨å‡¦ç†ã®æ¤œè¨¼
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ç¶²ç¾…

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
- å„æ®µéšã§ã®æ€§èƒ½æ¸¬å®š
- ã‚¤ãƒ™ãƒ³ãƒˆã®æœ€é©åŒ–ï¼ˆãƒãƒƒãƒå‡¦ç†ã€ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ï¼‰
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–

#### 4. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿæ§‹
- å•é¡Œç™ºç”Ÿæ™‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ™ãƒ¼ã‚¹ã¸ã®ä¸€æ™‚çš„ãªåˆ‡ã‚Šæˆ»ã—
- æ®µéšçš„ãªãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

## ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã¨å‡¦ç†ã®æœªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ

### 1. ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆé †ä½åˆ¶å¾¡
#### ç¾çŠ¶ã®èª²é¡Œ
- ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—é–“ã®å„ªå…ˆé †ä½ä»˜ã‘ãŒä¸å®Œå…¨
- ãƒãƒƒãƒå‡¦ç†æ™‚ã®å®Ÿè¡Œé †åºåˆ¶å¾¡ãŒä¸ååˆ†
- ã‚¤ãƒ™ãƒ³ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ãŒè€ƒæ…®ã•ã‚Œã¦ã„ãªã„

#### å®Ÿè£…ãŒå¿…è¦ãªæ©Ÿèƒ½
1. ã‚¤ãƒ™ãƒ³ãƒˆå„ªå…ˆåº¦ã®ä½“ç³»åŒ–
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã”ã¨ã®åŸºæœ¬å„ªå…ˆåº¦è¨­å®š
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ãŸå‹•çš„å„ªå…ˆåº¦èª¿æ•´
   - å„ªå…ˆåº¦ç¶™æ‰¿ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

2. ã‚¤ãƒ™ãƒ³ãƒˆä¾å­˜é–¢ä¿‚ã®ç®¡ç†
   - ã‚¤ãƒ™ãƒ³ãƒˆé–“ã®ä¾å­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰
   - å¾ªç’°ä¾å­˜ã®æ¤œå‡ºã¨è§£æ±º
   - ä¾å­˜é–¢ä¿‚ã«åŸºã¥ãå®Ÿè¡Œé †åºã®æœ€é©åŒ–

### 2. ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–
#### ç¾çŠ¶ã®èª²é¡Œ
- ãƒãƒƒãƒå‡¦ç†æ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆçµ±åˆãƒ­ã‚¸ãƒƒã‚¯ãŒä¸è¶³
- ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãŒè€ƒæ…®ã•ã‚Œã¦ã„ãªã„
- ãƒãƒƒãƒã‚µã‚¤ã‚ºã®å‹•çš„èª¿æ•´æ©Ÿèƒ½ãŒãªã„

#### å®Ÿè£…ãŒå¿…è¦ãªæ©Ÿèƒ½
1. ã‚¤ãƒ™ãƒ³ãƒˆçµ±åˆãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
   - åŒç¨®ã‚¤ãƒ™ãƒ³ãƒˆã®é›†ç´„ãƒ«ãƒ¼ãƒ«å®šç¾©
   - ç«¶åˆè§£æ±ºæˆ¦ç•¥ã®å®Ÿè£…
   - çµ±åˆçµæœã®æ•´åˆæ€§æ¤œè¨¼

2. ãƒ¡ãƒ¢ãƒªç®¡ç†ã®æœ€é©åŒ–
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒ—ãƒ¼ãƒ«ã®å°å…¥
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–ã¨åˆ¶å¾¡
   - ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®æœ€é©åŒ–

### 3. ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒªã‚«ãƒãƒªãƒ¼
#### ç¾çŠ¶ã®èª²é¡Œ
- ãƒãƒƒãƒå‡¦ç†ä¸­ã®ã‚¨ãƒ©ãƒ¼ä¼æ’­ãŒä¸å®Œå…¨
- éƒ¨åˆ†çš„ãªå¤±æ•—ã‹ã‚‰ã®å¾©å¸°æ©Ÿèƒ½ãŒä¸è¶³
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ãªå‡¦ç†ã®ä¿è¨¼ãŒãªã„

#### å®Ÿè£…ãŒå¿…è¦ãªæ©Ÿèƒ½
1. ã‚¨ãƒ©ãƒ¼ä¼æ’­ã®æ”¹å–„
   - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¼·åŒ–
   - ã‚¨ãƒ©ãƒ¼å½±éŸ¿ç¯„å›²ã®ç‰¹å®š
   - é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®å®Ÿè£…

2. ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹ã®å¼·åŒ–
   - ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã®è‡ªå‹•è¨­å®š
   - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã®å®Ÿè£…
   - æ®µéšçš„ãªãƒªã‚«ãƒãƒªãƒ¼æˆ¦ç•¥

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
#### ç¾çŠ¶ã®èª²é¡Œ
- ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ãŒä¸è¶³
- ãƒœãƒˆãƒ«ãƒãƒƒã‚¯æ¤œå‡ºæ©Ÿèƒ½ãŒãªã„
- ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³ã®å¯è¦–åŒ–ãŒä¸ååˆ†

#### å®Ÿè£…ãŒå¿…è¦ãªæ©Ÿèƒ½
1. ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
   - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†æ™‚é–“ã®è¨ˆæ¸¬
   - ã‚­ãƒ¥ãƒ¼ã®é•·ã•ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
   - ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®è¿½è·¡

2. åˆ†æãƒ„ãƒ¼ãƒ«
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°
   - ãƒœãƒˆãƒ«ãƒãƒƒã‚¯æ¤œå‡ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
   - è‡ªå‹•æœ€é©åŒ–ææ¡ˆæ©Ÿèƒ½

### 5. ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½
#### ç¾çŠ¶ã®èª²é¡Œ
- ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã®å¯è¦–åŒ–ãŒä¸è¶³
- ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®åé›†ãŒä¸ååˆ†
- ãƒ†ã‚¹ãƒˆç”¨ã®åˆ¶å¾¡æ©Ÿèƒ½ãŒé™å®šçš„

#### å®Ÿè£…ãŒå¿…è¦ãªæ©Ÿèƒ½
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã®è¨˜éŒ²
   - ã‚¤ãƒ™ãƒ³ãƒˆé–“ã®é–¢ä¿‚æ€§ã®å¯è¦–åŒ–
   - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºæ©Ÿèƒ½

2. ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿
   - çŠ¶æ…‹æ¤œæŸ»æ©Ÿèƒ½
   - ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯/ã‚¹ã‚¿ãƒ–æ©Ÿèƒ½

## ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã®èª²é¡Œåˆ†æ

### 1. ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°æ§‹é€ ã®åˆ†æ•£
#### ç¾çŠ¶ã®å®Ÿè£…
- EventManager: ã‚¤ãƒ™ãƒ³ãƒˆã®ä¸€æ™‚ä¿ç®¡ç”¨ãƒãƒƒãƒã‚­ãƒ¥ãƒ¼
- UI: UIæ›´æ–°ç”¨ã®ãƒšãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚­ãƒ¥ãƒ¼
- Buffer: æœªå®Ÿè£…ï¼ˆç›´æ¥æ›´æ–°ï¼‰

#### å½±éŸ¿ç¯„å›²ã¨èª²é¡Œ
1. æ•´åˆæ€§ã®å•é¡Œ
   - è¤‡æ•°ã®ã‚­ãƒ¥ãƒ¼ã§çŠ¶æ…‹ãŒåˆ†æ•£
   - ã‚­ãƒ¥ãƒ¼é–“ã®åŒæœŸãŒä¸å®Œå…¨
   - é †åºä¿è¨¼ãŒä¸ååˆ†

2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿
   - ã‚­ãƒ¥ãƒ¼é–“ã®ã‚³ãƒ”ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
   - ãƒ¡ãƒ¢ãƒªã®éåŠ¹ç‡ãªä½¿ç”¨
   - GCã®é »ç™º

### 2. ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆåº¦åˆ¶å¾¡ã®ä¸æ•´åˆ
#### ç¾çŠ¶ã®å®Ÿè£…çŠ¶æ³
1. UIæ›´æ–°ã®å„ªå…ˆåº¦
   - High/Medium/Low ã®3æ®µéš
   - æ›´æ–°ã‚¨ãƒªã‚¢ã”ã¨ã«å›ºå®šçš„
   - ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰æ©Ÿèƒ½ãŒé™å®šçš„

2. ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®å„ªå…ˆåº¦
   - ãƒãƒƒãƒ•ã‚¡ã‚¤ãƒ™ãƒ³ãƒˆãŒå¸¸ã«æœ€å„ªå…ˆ
   - ãã®ä»–ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯åŒä¸€å„ªå…ˆåº¦
   - å‹•çš„ãªå„ªå…ˆåº¦å¤‰æ›´ä¸å¯

#### ãƒªã‚¹ã‚¯åˆ†æ
1. ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã®å¯èƒ½æ€§
   - å„ªå…ˆåº¦é€†è»¢å•é¡Œã®æ½œåœ¨ãƒªã‚¹ã‚¯
   - ã‚¤ãƒ™ãƒ³ãƒˆé–“ã®å¾ªç’°å¾…ã¡

2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹
   - ä¸è¦ãªæ›´æ–°ã®ç™ºç”Ÿ
   - å„ªå…ˆåº¦ã®ä½ã„ã‚¤ãƒ™ãƒ³ãƒˆã®é…å»¶

### 3. ãƒãƒƒãƒå‡¦ç†ã®åˆ¶å¾¡æ©Ÿæ§‹
#### ç¾çŠ¶ã®å®Ÿè£…ã®åˆ¶é™
1. ãƒãƒƒãƒã®é–‹å§‹/çµ‚äº†åˆ¶å¾¡
   - æ˜ç¤ºçš„ãªåˆ¶å¾¡ãŒå¿…è¦
   - ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒãƒƒãƒå‡¦ç†ã®æœªå¯¾å¿œ
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®éƒ¨åˆ†çš„ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¸å¯

2. ã‚¤ãƒ™ãƒ³ãƒˆã®é›†ç´„
   - åŒä¸€ã‚¨ãƒªã‚¢ã®æ›´æ–°ã®ã¿é›†ç´„
   - ã‚¤ãƒ™ãƒ³ãƒˆé–“ã®é–¢é€£æ€§ã‚’è€ƒæ…®ã›ãš
   - é›†ç´„ãƒ«ãƒ¼ãƒ«ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºä¸å¯

#### æ½œåœ¨çš„ãªå•é¡Œ
1. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯
   - ãƒãƒƒãƒãƒ¢ãƒ¼ãƒ‰çµ‚äº†å¿˜ã‚Œ
   - æœªå‡¦ç†ã‚¤ãƒ™ãƒ³ãƒˆã®è“„ç©

2. éåŠ¹ç‡ãªæ›´æ–°
   - éå‰°ãªç”»é¢æ›´æ–°
   - ä¸è¦ãªã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ

### 4. ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ä¸å®Œå…¨æ€§
#### ç¾çŠ¶ã®å®Ÿè£…ã®å¼±ç‚¹
1. ã‚¨ãƒ©ãƒ¼ä¼æ’­
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ä¸­ã®ä¸€éƒ¨ã®ã¿
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã®æ¬ è½
   - éåŒæœŸã‚¨ãƒ©ãƒ¼ã®æ•æ‰ä¸è¶³

2. ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹
   - éƒ¨åˆ†çš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ã¿
   - çŠ¶æ…‹ã®ä¸€è²«æ€§ä¿è¨¼ãŒä¸å®Œå…¨
   - å†è©¦è¡Œæˆ¦ç•¥ã®æœªå®Ÿè£…

#### å½±éŸ¿åº¦
1. å®‰å®šæ€§ã¸ã®å½±éŸ¿
   - äºˆæœŸã›ã¬çŠ¶æ…‹ã®ç™ºç”Ÿ
   - ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§æå¤±
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®ä½ä¸‹

2. ä¿å®ˆæ€§ã¸ã®å½±éŸ¿
   - ã‚¨ãƒ©ãƒ¼åŸå› ã®ç‰¹å®šå›°é›£
   - ãƒ‡ãƒãƒƒã‚°ã®è¤‡é›‘åŒ–
   - æ©Ÿèƒ½è¿½åŠ æ™‚ã®ãƒªã‚¹ã‚¯å¢—å¤§

### 5. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®åˆ¶é™
#### ç¾çŠ¶ã®åˆ¶ç´„
1. åŒæœŸå‡¦ç†ã®åˆ¶é™
   - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãŒåŸºæœ¬çš„ã«åŒæœŸçš„
   - goroutineã®é™å®šçš„ãªä½¿ç”¨
   - éåŒæœŸå‡¦ç†ã®ã‚µãƒãƒ¼ãƒˆä¸è¶³

2. ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£åˆ¶é™
   - ã‚­ãƒ¥ãƒ¼ã‚µã‚¤ã‚ºã®å›ºå®š
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®åˆ¶å¾¡ãªã—
   - ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°æ©Ÿèƒ½ã®æ¬ å¦‚

#### å°†æ¥çš„ãªèª²é¡Œ
1. æ©Ÿèƒ½æ‹¡å¼µæ™‚ã®å•é¡Œ
   - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å¯¾å¿œã®å›°é›£ã•
   - æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®è¿½åŠ ã‚³ã‚¹ãƒˆ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯

2. é‹ç”¨é¢ã§ã®èª²é¡Œ
   - ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®å›°é›£ã•
   - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¤‡é›‘åŒ–
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã®åˆ¶é™

### 6. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã®ä¿è¨¼
#### ç¾çŠ¶ã®åˆ¶é™äº‹é …
1. ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·åˆ¶å¾¡
   - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®é…å»¶ãŒäºˆæ¸¬ä¸å¯
   - å„ªå…ˆåº¦ã«ã‚ˆã‚‹åˆ¶å¾¡ãŒä¸ååˆ†
   - å‡¦ç†æ™‚é–“ã®ä¿è¨¼ãªã—

2. å¿œç­”æ€§ã¸ã®å½±éŸ¿
   - UIæ›´æ–°ã®é…å»¶ç™ºç”Ÿ
   - ã‚­ãƒ¼å…¥åŠ›ã®é…å»¶å¯èƒ½æ€§
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ä¸è‡ªç„¶ã•

#### æ”¹å–„ãŒå¿…è¦ãªç‚¹
1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
   - ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®æ¸¬å®šæ©Ÿèƒ½
   - ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã®å¯è¦–åŒ–
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

2. åˆ¶å¾¡æ©Ÿæ§‹
   - ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°
   - ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°æˆ¦ç•¥
   - ãƒ—ãƒ©ã‚¤ã‚ªãƒªãƒ†ã‚£ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°

## ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°ã®ä¾å­˜é–¢ä¿‚åˆ†æ

### 1. ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°å±¤ã®éšå±¤æ§‹é€ 
#### ç¾çŠ¶ã®ä¾å­˜é–¢ä¿‚
```
EventManager
â””â†’ UpdateQueueï¼ˆã‚¤ãƒ™ãƒ³ãƒˆã®ä¸€æ™‚ä¿ç®¡ï¼‰
   â””â†’ UI.QueueUpdateï¼ˆç”»é¢æ›´æ–°è¦æ±‚ï¼‰
      â””â†’ pendingUpdatesï¼ˆæ›´æ–°ã®ä¿ç•™ï¼‰
         â””â†’ Bufferï¼ˆç›´æ¥æ›´æ–°ï¼‰
```

#### å•é¡Œç‚¹
1. ç›´åˆ—çš„ãªä¾å­˜
   - ä¸Šä½å±¤ã®ã‚¨ãƒ©ãƒ¼ãŒä¸‹ä½å±¤ã«ä¼æ’­
   - ä¸‹ä½å±¤ã®ãƒ–ãƒ­ãƒƒã‚¯ãŒä¸Šä½å±¤ã«å½±éŸ¿
   - ãƒªã‚«ãƒãƒªãƒ¼ãŒå›°é›£

2. çŠ¶æ…‹ç®¡ç†ã®åˆ†æ•£
   - å„å±¤ã§ç‹¬ç«‹ã—ãŸãƒãƒƒãƒãƒ¢ãƒ¼ãƒ‰ç®¡ç†
   - çŠ¶æ…‹ã®æ•´åˆæ€§ä¿è¨¼ãŒè¤‡é›‘
   - ãƒ‡ãƒãƒƒã‚°ãŒå›°é›£

### 2. ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®é †åºä¾å­˜
#### ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹
1. ãƒãƒƒãƒ•ã‚¡æ›´æ–°ã®ä¾å­˜ãƒã‚§ãƒ¼ãƒ³
```
BufferEvent
â””â†’ ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
   â””â†’ ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®æ›´æ–°
      â””â†’ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®æ›´æ–°
         â””â†’ ç”»é¢æ›´æ–°
```

2. UIæ›´æ–°ã®ä¾å­˜ãƒã‚§ãƒ¼ãƒ³
```
UIEvent
â””â†’ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ›´æ–°
   â””â†’ è¡¨ç¤ºå†…å®¹æ›´æ–°
      â””â†’ ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®æ›´æ–°
         â””â†’ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«åŒæœŸ
```

#### ãƒªã‚¹ã‚¯è¦å› 
1. ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã®å¯èƒ½æ€§
   - ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹• â†’ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« â†’ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ â†’ ã‚«ãƒ¼ã‚½ãƒ«
   - ãƒãƒƒãƒ•ã‚¡æ›´æ–° â†’ UIæ›´æ–° â†’ ãƒãƒƒãƒ•ã‚¡æ¤œè¨¼ â†’ ãƒãƒƒãƒ•ã‚¡æ›´æ–°

2. å¾ªç’°å‚ç…§
   - EventManager â†” UI
   - Buffer â†” Cursor
   - Scroll â†” Layout

### 3. ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆåº¦ç«¶åˆ
#### ç«¶åˆãƒ‘ã‚¿ãƒ¼ãƒ³
1. å³æ™‚æ›´æ–°ã¨é…å»¶æ›´æ–°
   - ã‚­ãƒ¼å…¥åŠ›ï¼ˆå³æ™‚ï¼‰vs ãƒãƒƒãƒæ›´æ–°ï¼ˆé…å»¶ï¼‰
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆå³æ™‚ï¼‰vs ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ›´æ–°ï¼ˆé…å»¶ï¼‰
   - ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ï¼ˆå³æ™‚ï¼‰vs ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°ï¼ˆé…å»¶ï¼‰

2. ãƒªã‚½ãƒ¼ã‚¹ç«¶åˆ
   - ãƒãƒƒãƒ•ã‚¡ã‚¢ã‚¯ã‚»ã‚¹
   - ç”»é¢æ›´æ–°ãƒªã‚½ãƒ¼ã‚¹
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡

#### è§£æ±ºãŒå¿…è¦ãªèª²é¡Œ
1. å„ªå…ˆåº¦ã®æ•´ç†
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—é–“ã®å„ªå…ˆé–¢ä¿‚ã®æ˜ç¢ºåŒ–
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ãŸå‹•çš„å„ªå…ˆåº¦
   - å„ªå…ˆåº¦ã®ç¶™æ‰¿ãƒ«ãƒ¼ãƒ«

2. ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
   - å…±æœ‰ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æˆ¦ç•¥
   - ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯é˜²æ­¢æ©Ÿæ§‹
   - ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ã®åˆ¶å¾¡

### 4. ã‚¨ãƒ©ãƒ¼ä¼æ’­ã®çµŒè·¯
#### ã‚¨ãƒ©ãƒ¼ã®æµã‚Œ
1. ä¸Šä½ã‹ã‚‰ä¸‹ä½ã¸ã®ä¼æ’­
```
EventManager ã‚¨ãƒ©ãƒ¼
â””â†’ UpdateQueue ã‚¨ãƒ©ãƒ¼
   â””â†’ UIæ›´æ–°ã‚¨ãƒ©ãƒ¼
      â””â†’ ãƒãƒƒãƒ•ã‚¡æ“ä½œã‚¨ãƒ©ãƒ¼
```

2. ä¸‹ä½ã‹ã‚‰ä¸Šä½ã¸ã®ä¼æ’­
```
ãƒãƒƒãƒ•ã‚¡æ“ä½œã‚¨ãƒ©ãƒ¼
â””â†’ UIæ›´æ–°ã‚¨ãƒ©ãƒ¼
   â””â†’ ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã‚¨ãƒ©ãƒ¼
      â””â†’ ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¨ãƒ©ãƒ¼
```

#### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®èª²é¡Œ
1. ã‚¨ãƒ©ãƒ¼ã®ã‚¹ã‚³ãƒ¼ãƒ—
   - å±€æ‰€çš„ãªãƒªã‚«ãƒãƒªãƒ¼
   - é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ•´åˆæ€§
   - ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å®‰å®šæ€§

2. ã‚¨ãƒ©ãƒ¼ã®åˆ†é¡
   - è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼
   - å¾©æ—§å¯èƒ½ã‚¨ãƒ©ãƒ¼
   - è­¦å‘Šãƒ¬ãƒ™ãƒ«ã®ã‚¨ãƒ©ãƒ¼

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
#### å‡¦ç†æ™‚é–“ã®é›†ä¸­
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒ
   - ã‚¤ãƒ™ãƒ³ãƒˆã®é…é€ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
   - ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼å‘¼ã³å‡ºã—ã‚³ã‚¹ãƒˆ
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã®å‡¦ç†æ™‚é–“

2. ãƒãƒƒãƒå‡¦ç†
   - ãƒãƒƒãƒã®ã‚µã‚¤ã‚ºç®¡ç†
   - ãƒ¡ãƒ¢ãƒªæ¶ˆè²»ã®ã‚¹ãƒ‘ã‚¤ã‚¯
   - GCã¸ã®å½±éŸ¿

#### æœ€é©åŒ–ãƒã‚¤ãƒ³ãƒˆ
1. ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°æˆ¦ç•¥
   - ãƒãƒƒãƒã‚µã‚¤ã‚ºã®å‹•çš„èª¿æ•´
   - ã‚¤ãƒ™ãƒ³ãƒˆã®çµåˆã¨åˆ†å‰²
   - å„ªå…ˆåº¦ã«åŸºã¥ãå‡¦ç†é †åº

2. ãƒ¡ãƒ¢ãƒªç®¡ç†
   - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«
   - ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ã®æœ€é©åŒ–
   - GCãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªè¨­è¨ˆ

## ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°å®Ÿè£…ã®å„ªå…ˆé †ä½

### ç¬¬1ãƒ•ã‚§ãƒ¼ã‚º: åŸºç›¤ã®å¼·åŒ–
#### 1. ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°å±¤ã®å†æ§‹ç¯‰
1. ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã®ä¸€å…ƒç®¡ç†
   - UpdateQueueã®è²¬å‹™ã®æ˜ç¢ºåŒ–
   - ã‚­ãƒ¥ãƒ¼æ“ä½œã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æ•´ç†
   - ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãªå®Ÿè£…ã®ç¢ºèª

2. ãƒãƒƒãƒå‡¦ç†ã®åˆ¶å¾¡æ©Ÿæ§‹
   - ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒãƒƒãƒã®å¯¾å¿œ
   - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ãªå‡¦ç†ã®å°å…¥
   - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã®å®Ÿè£…

#### 2. å„ªå…ˆåº¦åˆ¶å¾¡ã®ç¢ºç«‹
1. å„ªå…ˆåº¦ä½“ç³»ã®æ•´å‚™
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã”ã¨ã®åŸºæœ¬å„ªå…ˆåº¦
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¾å­˜ã®å„ªå…ˆåº¦
   - å„ªå…ˆåº¦ç¶™æ‰¿ã®ãƒ«ãƒ¼ãƒ«

2. ã‚¤ãƒ™ãƒ³ãƒˆä¾å­˜é–¢ä¿‚ã®ç®¡ç†
   - ä¾å­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰
   - å¾ªç’°å‚ç…§ã®æ¤œå‡ºæ©Ÿæ§‹
   - ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯é˜²æ­¢ã®ä»•çµ„ã¿

### ç¬¬2ãƒ•ã‚§ãƒ¼ã‚º: ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å¼·åŒ–
#### 1. ã‚¨ãƒ©ãƒ¼ä¼æ’­ã®æ•´å‚™
1. ã‚¨ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¼·åŒ–
   - ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®è©³ç´°åŒ–
   - ç™ºç”Ÿä½ç½®ã®ç‰¹å®š
   - å½±éŸ¿ç¯„å›²ã®æŠŠæ¡

2. ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹ã®å®Ÿè£…
   - éƒ¨åˆ†çš„ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
   - çŠ¶æ…‹ã®ä¸€è²«æ€§ä¿è¨¼
   - è‡ªå‹•ãƒªã‚«ãƒãƒªãƒ¼ã®ä»•çµ„ã¿

#### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
1. ã‚¨ãƒ©ãƒ¼ã®åˆ†é¡ã¨å¯¾å¿œ
   - è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼ã®ç‰¹å®š
   - å¾©æ—§å¯èƒ½ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†
   - è­¦å‘Šãƒ¬ãƒ™ãƒ«ã®æ‰±ã„

2. ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®å¼·åŒ–
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã®è¨˜éŒ²
   - ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã®è¿½è·¡
   - ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã®åé›†

### ç¬¬3ãƒ•ã‚§ãƒ¼ã‚º: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–
#### 1. ãƒ¡ãƒ¢ãƒªç®¡ç†ã®æ”¹å–„
1. ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ã®å‘ä¸Š
   - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«ã®å°å…¥
   - ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ã®æœ€é©åŒ–
   - GCè² è·ã®è»½æ¸›

2. ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–
   - ãƒãƒƒãƒã‚µã‚¤ã‚ºã®å‹•çš„èª¿æ•´
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®åˆ¶å¾¡
   - ã‚¤ãƒ™ãƒ³ãƒˆã®çµ±åˆãƒ«ãƒ¼ãƒ«

#### 2. å‡¦ç†åŠ¹ç‡ã®æ”¹å–„
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒã®æœ€é©åŒ–
   - ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã®åŠ¹ç‡åŒ–
   - ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒãƒ¼å‘¼ã³å‡ºã—ã®æ”¹å–„
   - ã‚­ãƒ¥ãƒ¼å‡¦ç†ã®é«˜é€ŸåŒ–

2. UIæ›´æ–°ã®åŠ¹ç‡åŒ–
   - æ›´æ–°ç¯„å›²ã®æœ€é©åŒ–
   - ä¸è¦ãªæ›´æ–°ã®æ’é™¤
   - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®åŠ¹ç‡åŒ–

### ç¬¬4ãƒ•ã‚§ãƒ¼ã‚º: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨åˆ†æ
#### 1. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬
1. ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ã®æ•´å‚™
   - å‡¦ç†æ™‚é–“ã®è¨ˆæ¸¬
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®è¿½è·¡
   - ã‚­ãƒ¥ãƒ¼ã®çŠ¶æ…‹ç›£è¦–

2. ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åˆ†æ
   - ãƒ›ãƒƒãƒˆã‚¹ãƒãƒƒãƒˆã®ç‰¹å®š
   - ãƒªã‚½ãƒ¼ã‚¹ç«¶åˆã®æ¤œå‡º
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ã®äºˆæ¸¬

#### 2. ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½ã®å¼·åŒ–
1. ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°æ©Ÿèƒ½
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã®è¨˜éŒ²
   - ä¾å­˜é–¢ä¿‚ã®å¯è¦–åŒ–
   - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º

2. åˆ†æãƒ„ãƒ¼ãƒ«
   - ã‚¤ãƒ™ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿
   - çŠ¶æ…‹æ¤œæŸ»æ©Ÿèƒ½
   - ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°æ©Ÿèƒ½

### å®Ÿè£…ã®æ³¨æ„ç‚¹
1. æ®µéšçš„ãªç§»è¡Œ
   - æ—¢å­˜æ©Ÿèƒ½ã®ç¶­æŒ
   - ãƒãƒƒã‚¯ãƒ¯ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ‘ãƒ†ã‚£ãƒ“ãƒªãƒ†ã‚£
   - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã®ç¢ºä¿

2. ãƒ†ã‚¹ãƒˆã®é‡è¦æ€§
   - ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®æ‹¡å……
   - çµ±åˆãƒ†ã‚¹ãƒˆã®å¼·åŒ–
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
   - è¨­è¨ˆæ„å›³ã®è¨˜éŒ²
   - APIã®ä½¿ç”¨æ–¹æ³•
   - ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

4. ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒã‚¤ãƒ³ãƒˆ
   - ã‚³ãƒ¼ãƒ‰ã®å“è³ª
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿
   - ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å¦¥å½“æ€§

## ã‚¤ãƒ™ãƒ³ãƒˆã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°å®Ÿè£…ã®æŠ€è¡“çš„ãªæ³¨æ„ç‚¹

### 1. ä¸¦è¡Œå‡¦ç†åˆ¶å¾¡
#### ç¾çŠ¶ã®èª²é¡Œ
1. ãƒŸãƒ¥ãƒ¼ãƒ†ãƒƒã‚¯ã‚¹ã®ä½¿ç”¨ç¯„å›²
   ```go
   // ç¾çŠ¶ã®ãƒ‘ã‚¿ãƒ¼ãƒ³
   func (q *UpdateQueue) Add(event Event) {
       q.mu.Lock()
       defer q.mu.Unlock()
       q.queue = append(q.queue, event)
   }
   ```
   - ãƒ­ãƒƒã‚¯ã®ç²’åº¦ãŒç´°ã‹ã™ãã‚‹
   - ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã®æ½œåœ¨ãƒªã‚¹ã‚¯
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿

2. ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®åŒæœŸ
   ```go
   // è¦æ³¨æ„ãªãƒ‘ã‚¿ãƒ¼ãƒ³
   func (em *EventManager) ProcessUpdates() {
       em.updateQueue.Flush(func(event Event) {
           em.publishEvent(event)  // åŒæœŸçš„ãªå‡¦ç†
       })
   }
   ```
   - å‡¦ç†ã®ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
   - ãƒªã‚½ãƒ¼ã‚¹ã®å°‚æœ‰
   - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ€§ã®ä½ä¸‹

#### æ”¹å–„æ–¹é‡
1. ãƒ­ãƒƒã‚¯æˆ¦ç•¥ã®è¦‹ç›´ã—
   - Read/Writeãƒ­ãƒƒã‚¯ã®ä½¿ã„åˆ†ã‘
   - ãƒ­ãƒƒã‚¯ã®ä¿æŒæ™‚é–“ã®æœ€å°åŒ–
   - ãƒ­ãƒƒã‚¯ãƒ•ãƒªãƒ¼ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ¤œè¨

2. éåŒæœŸå‡¦ç†ã®æ´»ç”¨
   - goroutineã®é©åˆ‡ãªåˆ©ç”¨
   - ãƒãƒ£ãƒãƒ«ãƒ™ãƒ¼ã‚¹ã®é€šä¿¡
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ã‚ˆã‚‹åˆ¶å¾¡

### 2. ãƒ¡ãƒ¢ãƒªç®¡ç†
#### ç¾çŠ¶ã®èª²é¡Œ
1. ãƒ¡ãƒ¢ãƒªã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
   ```go
   // éåŠ¹ç‡ãªãƒ‘ã‚¿ãƒ¼ãƒ³
   queue = make([]Event, 0)  // éƒ½åº¦ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
   ```
   - é »ç¹ãªã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
   - GCè² è·ã®å¢—å¤§
   - ãƒ¡ãƒ¢ãƒªãƒ•ãƒ©ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

2. ãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚º
   ```go
   // åˆ¶å¾¡ãŒä¸ååˆ†ãªãƒ‘ã‚¿ãƒ¼ãƒ³
   em.batchEvents = append(em.batchEvents, event)
   ```
   - å‹•çš„ãªæ‹¡å¼µã«ä¾å­˜
   - ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®äºˆæ¸¬å›°é›£
   - ã‚¹ãƒ‘ã‚¤ã‚¯ã®ç™ºç”Ÿ

#### æ”¹å–„æ–¹é‡
1. ãƒ¡ãƒ¢ãƒªãƒ—ãƒ¼ãƒ«å°å…¥
   ```go
   // æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
   type EventPool struct {
       pool sync.Pool
       capacity int
   }
   ```
   - ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†åˆ©ç”¨
   - ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‰Šæ¸›
   - GCè² è·ã®è»½æ¸›

2. ã‚µã‚¤ã‚ºç®¡ç†ã®æ”¹å–„
   - é©åˆ‡ãªåˆæœŸã‚µã‚¤ã‚º
   - ä¸Šé™å€¤ã®è¨­å®š
   - å‹•çš„ãªèª¿æ•´ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

### 3. ã‚¨ãƒ©ãƒ¼å‡¦ç†
#### ç¾çŠ¶ã®èª²é¡Œ
1. ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®ä¸è¶³
   ```go
   // ä¸ååˆ†ãªãƒ‘ã‚¿ãƒ¼ãƒ³
   if err != nil {
       return err
   }
   ```
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã®æ¬ è½
   - ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã®æ–­çµ¶
   - ãƒ‡ãƒãƒƒã‚°å›°é›£

2. ãƒªã‚«ãƒãƒªãƒ¼å‡¦ç†
   ```go
   // ãƒªã‚¹ã‚¯ã®é«˜ã„ãƒ‘ã‚¿ãƒ¼ãƒ³
   defer em.ClearBatch()  // å˜ç´”ãªã‚¯ãƒªã‚¢
   ```
   - çŠ¶æ…‹ã®ä¸€è²«æ€§ãŒä¸ä¿è¨¼
   - éƒ¨åˆ†çš„ãªå¤±æ•—ã¸ã®å¯¾å¿œä¸è¶³
   - ã‚µã‚¤ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®è€ƒæ…®ä¸è¶³

#### æ”¹å–„æ–¹é‡
1. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–
   ```go
   // æ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
   type EventError struct {
       Event     Event
       Context   map[string]interface{}
       Cause     error
       Timestamp time.Time
   }
   ```
   - è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±
   - ã‚¨ãƒ©ãƒ¼ã®è¿½è·¡å¯èƒ½æ€§
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä¿æŒ

2. ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³çš„ãªå‡¦ç†
   - å¤‰æ›´ã®ã‚¢ãƒˆãƒŸãƒƒã‚¯æ€§
   - ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
   - çŠ¶æ…‹ã®ä¸€è²«æ€§ä¿è¨¼

### 4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
#### ç¾çŠ¶ã®èª²é¡Œ
1. ãƒãƒƒãƒå‡¦ç†ã®åŠ¹ç‡
   ```go
   // éåŠ¹ç‡ãªãƒ‘ã‚¿ãƒ¼ãƒ³
   for _, event := range events {
       process(event)  // å€‹åˆ¥å‡¦ç†
   }
   ```
   - ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã®è“„ç©
   - ãƒªã‚½ãƒ¼ã‚¹ã®éåŠ¹ç‡ãªä½¿ç”¨
   - å‡¦ç†ã®é…å»¶

2. ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆåº¦
   ```go
   // å˜ç´”ã™ãã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
   if update.priority > existing.priority {
       // å„ªå…ˆåº¦ã ã‘ã§åˆ¤æ–­
   }
   ```
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ç„¡è¦–
   - é™çš„ãªå„ªå…ˆåº¦ã®ã¿
   - å‡¦ç†é †åºã®æœ€é©åŒ–ä¸è¶³

#### æ”¹å–„æ–¹é‡
1. ãƒãƒƒãƒæœ€é©åŒ–
   - ã‚¤ãƒ™ãƒ³ãƒˆã®é›†ç´„
   - ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°æˆ¦ç•¥
   - ä¸¦åˆ—å‡¦ç†ã®æ´»ç”¨

2. ã‚¹ãƒãƒ¼ãƒˆãªå„ªå…ˆåº¦åˆ¶å¾¡
   - å‹•çš„å„ªå…ˆåº¦ã®å°å…¥
   - ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®è€ƒæ…®
   - å‡¦ç†é †åºã®æœ€é©åŒ–

## åˆæœŸå®Ÿè£…è¨ˆç”»

### 1. ç§»è¡Œå¯¾è±¡ã®é¸å®š
#### å¯¾è±¡ã‚³ãƒãƒ³ãƒ‰
1. Ctrl+S (SaveCommand)
   - ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã‚³ãƒãƒ³ãƒ‰
   - ãƒãƒƒãƒ•ã‚¡å†…å®¹ã«å½±éŸ¿ãªã—
   - UIæ›´æ–°ã¯æœ€å°é™ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿ï¼‰

2. Ctrl+C/Q (QuitCommand)
   - ã‚¨ãƒ‡ã‚£ã‚¿çµ‚äº†ã‚³ãƒãƒ³ãƒ‰
   - çŠ¶æ…‹å¤‰æ›´ã¯æœ€çµ‚æ®µéšã®ã¿
   - è­¦å‘Šè¡¨ç¤ºã®UIã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼æ¤œè¨¼ã«é©åˆ‡

### 2. å®Ÿè£…ç¯„å›²
#### 1. SaveCommand ã®ç§»è¡Œ
1. ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
```go
type SaveEvent struct {
    BaseEvent
    Filename string
    Force    bool  // è­¦å‘Šã‚’ç„¡è¦–ã—ã¦ä¿å­˜
}
```

2. å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
SaveCommand.Execute
â””â†’ FileEventç™ºè¡Œ
   â””â†’ FileEventHandler
      â”œâ†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜å‡¦ç†
      â”œâ†’ çŠ¶æ…‹æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ
      â””â†’ UIæ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
```

#### 2. QuitCommand ã®ç§»è¡Œ
1. ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
```go
type QuitEvent struct {
    BaseEvent
    Force    bool  // è­¦å‘Šã‚’ç„¡è¦–ã—ã¦çµ‚äº†
    SaveNeeded bool
}
```

2. å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
QuitCommand.Execute
â””â†’ QuitEventç™ºè¡Œ
   â””â†’ SystemEventHandler
      â”œâ†’ çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯
      â”œâ†’ è­¦å‘Šè¡¨ç¤ºã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œï¼ˆå¿…è¦æ™‚ï¼‰
      â””â†’ çµ‚äº†å‡¦ç†å®Ÿè¡Œï¼ˆForce=trueæ™‚ï¼‰
```

### 3. å®Ÿè£…å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
1. ã‚¤ãƒ™ãƒ³ãƒˆå®šç¾©
- `editor/events/system_event.go`ï¼ˆæ–°è¦ï¼‰
  - QuitEvent
  - SystemEventType
  - SystemEventHandler

2. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
- `editor/events/manager.go`
  - SystemEventHandlerã®ç™»éŒ²å‡¦ç†
  - ã‚¤ãƒ™ãƒ³ãƒˆã®å„ªå…ˆåº¦åˆ¶å¾¡

3. ã‚³ãƒãƒ³ãƒ‰ä¿®æ­£
- `editor/command.go`
  - SaveCommand
  - QuitCommand
  - ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œå‡¦ç†ã®è¿½åŠ 

4. ã‚¨ãƒ‡ã‚£ã‚¿æœ¬ä½“
- `editor/editor.go`
  - createControlKeyCommand
  - SystemEventHandlerã®å®Ÿè£…

### 4. ãƒ†ã‚¹ãƒˆè¨ˆç”»
1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- `editor/events/system_event_test.go`ï¼ˆæ–°è¦ï¼‰
  - ã‚¤ãƒ™ãƒ³ãƒˆç”Ÿæˆ
  - ãƒãƒ³ãƒ‰ãƒ©å‡¦ç†
  - çŠ¶æ…‹é·ç§»

2. çµ±åˆãƒ†ã‚¹ãƒˆ
- `editor/editor_test.go`
  - ã‚³ãƒãƒ³ãƒ‰â†’ã‚¤ãƒ™ãƒ³ãƒˆå¤‰æ›
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³
  - ã‚¨ãƒ©ãƒ¼å‡¦ç†

### 5. æ¤œè¨¼ãƒã‚¤ãƒ³ãƒˆ
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼
- ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°
- ãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè¡Œé †åº
- çŠ¶æ…‹æ›´æ–°ã®æ•´åˆæ€§

2. ã‚¨ãƒ©ãƒ¼å‡¦ç†
- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã‚¨ãƒ©ãƒ¼
- çŠ¶æ…‹ä¸æ•´åˆ
- ãƒªã‚«ãƒãƒªãƒ¼å‡¦ç†

3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·

## åˆæœŸå®Ÿè£…ã®æ®µéšçš„ç§»è¡Œæ‰‹é †

### Phase 1: ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆåŸºç›¤ã®å®Ÿè£…
#### 1. ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®å®šç¾©
1. ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®è¿½åŠ 
```go
const (
    SystemEventType EventType = "system"
)

type SystemEventSubType string
const (
    SystemSave   SystemEventSubType = "save"
    SystemQuit   SystemEventSubType = "quit"
    SystemStatus SystemEventSubType = "status"
)
```

2. ã‚¤ãƒ™ãƒ³ãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ‹¡å¼µ
```go
type SystemEvent interface {
    Event
    GetSystemType() SystemEventSubType
}
```

#### 2. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®å®Ÿè£…
1. ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
```go
type SystemEventHandler interface {
    HandleSaveEvent(event *SaveEvent) error
    HandleQuitEvent(event *QuitEvent) error
    HandleStatusEvent(event *StatusEvent) error
}
```

2. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ³ãƒ‰ãƒ©
```go
type DefaultSystemEventHandler struct {
    editor EditorOperations
}
```

### Phase 2: æ—¢å­˜ã‚³ãƒãƒ³ãƒ‰ã®æ‹¡å¼µ
#### 1. SaveCommandã®æ‹¡å¼µ
1. ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ç¶­æŒ
```go
func (c *SaveCommand) Execute() error {
    // æ—¢å­˜ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ç¶­æŒ
    return c.executeWithEvents()
}
```

2. ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…è¿½åŠ 
```go
func (c *SaveCommand) executeWithEvents() error {
    event := NewSaveEvent(c.editor.GetFilename())
    return c.editor.GetEventManager().Publish(event)
}
```

#### 2. QuitCommandã®æ‹¡å¼µ
1. çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ã®åˆ†é›¢
```go
func (c *QuitCommand) requiresConfirmation() bool {
    return c.editor.IsDirty() && !c.editor.IsQuitWarningShown()
}
```

2. ã‚¤ãƒ™ãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã®å®Ÿè£…
```go
func (c *QuitCommand) executeWithEvents() error {
    event := NewQuitEvent(c.requiresConfirmation())
    return c.editor.GetEventManager().Publish(event)
}
```

### Phase 3: ã‚¨ãƒ©ãƒ¼å‡¦ç†ã¨ãƒªã‚«ãƒãƒªãƒ¼
#### 1. ã‚¨ãƒ©ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å¼·åŒ–
1. ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼
```go
type SystemEventError struct {
    EventError
    SystemType SystemEventSubType
    Operation  string
}
```

2. ãƒªã‚«ãƒãƒªãƒ¼ãƒãƒ³ãƒ‰ãƒ©
```go
func (h *DefaultSystemEventHandler) Recover(err error) error {
    // ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‹ã‚‰ã®å¾©å¸°å‡¦ç†
    return h.editor.GetEventManager().Publish(NewStatusEvent(err.Error()))
}
```

#### 2. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿæ§‹
1. çŠ¶æ…‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
```go
type SystemStateSnapshot struct {
    Timestamp  time.Time
    EventType  SystemEventSubType
    State      map[string]interface{}
}
```

2. çŠ¶æ…‹å¾©å…ƒ
```go
func (h *DefaultSystemEventHandler) RestoreState(snapshot *SystemStateSnapshot) error {
    // çŠ¶æ…‹ã®å¾©å…ƒå‡¦ç†
    return nil
}
```

### Phase 4: ã‚¤ãƒ™ãƒ³ãƒˆæœ€é©åŒ–
#### 1. ãƒãƒƒãƒå‡¦ç†ã®å°å…¥
1. ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
```go
type SystemEventBatch struct {
    Events []SystemEvent
    Priority int
}
```

2. ãƒãƒƒãƒãƒãƒ³ãƒ‰ãƒ©
```go
func (h *DefaultSystemEventHandler) HandleBatch(batch *SystemEventBatch) error {
    // ãƒãƒƒãƒå‡¦ç†ã®æœ€é©åŒ–
    return nil
}
```

#### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¶å¾¡
1. ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°
```go
type SystemEventThrottler struct {
    MaxEventsPerSecond int
    EventQueue *queue.PriorityQueue
}
```

2. ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
```go
type SystemEventMetrics struct {
    ProcessingTime time.Duration
    QueueLength   int
    ErrorCount    int
}
```

### Phase 5: ç§»è¡Œã®å®Œäº†
#### 1. æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ç½®ãæ›ãˆ
1. ã‚³ãƒãƒ³ãƒ‰ãƒ•ã‚¡ã‚¯ãƒˆãƒªã®æ›´æ–°
```go
func (e *Editor) createSystemCommand(eventType SystemEventSubType) Command {
    return NewEventBasedCommand(e, eventType)
}
```

2. ç›´æ¥å‘¼ã³å‡ºã—ã®é™¤å»
```go
// å‰Šé™¤å¯¾è±¡
editor.SaveFile()
// æ–°å®Ÿè£…
editor.GetEventManager().Publish(NewSaveEvent(filename))
```

#### 2. ãƒ†ã‚¹ãƒˆç’°å¢ƒã®æ•´å‚™
1. ã‚¤ãƒ™ãƒ³ãƒˆãƒ¢ãƒƒã‚¯
```go
type MockSystemEventHandler struct {
    HandleSaveFunc func(*SaveEvent) error
    HandleQuitFunc func(*QuitEvent) error
}
```

2. çµ±åˆãƒ†ã‚¹ãƒˆã®æ‹¡å……
```go
func TestSystemEventFlow(t *testing.T) {
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼ã®æ¤œè¨¼
}
```

### å®Ÿè£…ã®å„ªå…ˆé †ä½
1. ç¬¬1é€±ç›®
- ã‚·ã‚¹ãƒ†ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®åŸºæœ¬å®Ÿè£…
- SaveEventã®å®Ÿè£…ã¨ç§»è¡Œ
- åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†

2. ç¬¬2é€±ç›®
- QuitEventã®å®Ÿè£…ã¨ç§»è¡Œ
- ã‚¨ãƒ©ãƒ¼ãƒªã‚«ãƒãƒªãƒ¼æ©Ÿæ§‹
- åˆæœŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

3. ç¬¬3é€±ç›®
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- ãƒ†ã‚¹ãƒˆã®æ‹¡å……
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™